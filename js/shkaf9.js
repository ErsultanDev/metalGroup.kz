const data = [{
        link: "pochta_ip1.html",
        title: "Шкаф ИП-1-0,5",
        desc: "Односекционный шкаф с возможностью индивидуального моделирования наполнения при выборе необходимых комплектующих и их расположении в шкафах.",
        img: '/images/fulls/pochta/ip1.jpg',
        price: 69510,
        code: "0",
        ekran: '2',
        yash: '5',
        kru: '3'

    },

    {
        link: "pochta_ip2.html",
        title: "Шкаф ИП-1",
        desc: "Односекционный шкаф с возможностью индивидуального моделирования наполнения при выборе необходимых комплектующих и их расположении в шкафах.",
        img: '/images/fulls/pochta/ip2.jpg',
        price: 106926,
        code: "0",
        kru: '3'

    },


    {
        link: "pochta_ip3.html",
        title: "Шкаф ИП-2-0,5",
        desc: "Двухсекционный шкаф с возможностью индивидуального моделирования наполнения при выборе необходимых комплектующих и их расположении в шкафах.",
        img: '/images/fulls/pochta/ip3.jpg',
        price: 88743,
        code: "0",
        kru: '3'

    },


    {
        link: "pochta_ip4.html",
        title: "Шкаф ИП-2",
        desc: "Двухсекционный шкаф с возможностью индивидуального моделирования наполнения при выборе необходимых комплектующих и их расположении в шкафах.",
        img: '/images/fulls/pochta/ip4.jpg',
        price: 124828,
        code: "0",
        kru: '3'
    },

    {
        link: "pochta_ip5.html",
        title: "К-т ИП-1/1",
        desc: "Инструментальный шкаф  К-т ИП-1/1 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip4-33.jpg',
        price: 184999,
        code: "0",
        polki: '2',
        ekran: '2',
        yash: '2',
        kru: '2'
    },

    {
        link: "pochta_ip6.html",
        title: "К-т ИП-1/2",
        desc: "Инструментальный шкаф  К-т ИП-1/2 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip6.jpg',
        price: 176562,
        code: "0",
        polki: '3',
        ekran: '2',
        yash: '2',
        kru: '2'

    },
    {
        link: "pochta_ip7.html",
        title: "К-т ИП-1/3",
        desc: "Инструментальный шкаф  К-т ИП-1/3 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip7.png',
        price: 166317,
        code: "0",
        polki: '4',
        yash: '2'
    },
    {
        link: "pochta_ip8.html",
        title: "К-т ИП-1/4",
        desc: "Инструментальный шкаф  К-т ИП-1/4 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip8.jpg',
        price: 155435,
        code: "0",
        polki: '2',
        ekran: '2',
        kru: '1'
    },
    {
        link: "pochta_ip9.html",
        title: "К-т ИП-1/5 (ИП-1: шкаф-1, полка-1, экран-2, ящик-4;)",
        desc: "Инструментальный шкаф  К-т ИП-1/5 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip9.jpg',
        price: 206697,
        code: "0",
        polki: '1',
        ekran: '2',
        yash: '4',
        kru: '2'
    },

    {
        link: "pochta_ip10.html",
        title: "К-т ИП-1/6",
        desc: "Инструментальный шкаф  К-т ИП-1/6 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip10.jpg',
        price: 147324,
        code: "0",
        polki: '3',
        ekran: '1',
        kru: '2'
    },
    {
        link: "pochta_ip11.html",
        title: "К-т ИП-1/7 ",
        desc: "Инструментальный шкаф  К-т ИП-1/7 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip9.jpg',
        price: 205282,
        code: "0",
        polki: '1',
        ekran: '2',
        yash: '4',
        kru: '1'

    },
    {
        link: "pochta_ip12.html",
        title: "К-т ИП-1/8",
        desc: "Инструментальный шкаф  К-т ИП-1/8 предназначен для хранения инструмента и оснастки на производственных предприятиях, в ремонтных мастерских, гаражах и т.д. Представляет собой сборно-разборную конструкцию и состоит из комплекта сборочных деталей: корпус шкафа, полки, выдвижные ящики и экраны. Шкаф можно смоделировать индивидуально, выбрав необходимые комплектующие и их расположение.",
        img: '/images/fulls/pochta/ip12.jpg',
        price: 188016,
        code: "0",
        polki: '3',
        yash: '4',
        kru: '3'
    },


    {
        link: "pochta_ip13.html",
        title: "К-т ИП-2-0,5/1",
        desc: "Металлический инструментальный шкаф ПАКС ИП 2-0,5/1. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip3-2.jpg',
        price: 144672,
        code: "0",
        polki: '2',
        yash: '5',
        kru: '3'
    },


    {
        link: "pochta_ip14.html",
        title: "К-т ИП-2-0,5/2",
        desc: "Металлический инструментальный шкаф ПАКС ИП 2-0,5/2. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip14.jpg',
        price: 144672,
        code: "0",
        polki: '5',
        yash: '2',
        kru: '3'
    },


    {
        link: "pochta_ip15.html",
        title: "К-т ИП-2/1",
        desc: "Металлический инструментальный шкаф К-т ИП-2/1. Предназначен для оборудования гаража илимастерской.",
        img: '/images/fulls/pochta/ip15.jpg',
        price: 177201,
        code: "0",
        polki: '4',
        ekran: '2',
        yash: '2',
        kru: '1'
    },



    {
        link: "pochta_ip16.html",
        title: "К-т ИП-2-0,5/1",
        desc: "Металлический инструментальный шкаф К-т ИП-2/2. Предназначен для оборудования гаража илимастерской.",
        img: '/images/fulls/pochta/ip16.jpg',
        price: 204510,
        code: "0",
        polki: '6',
        ekran: '2',
        yash: '4',
        kru: '2'
    },


    {
        link: "pochta_ip17.html",
        title: "К-т ИП 1-0,5/1",
        desc: "Металлический инструментальный шкаф К-т ИП 1-0,5/1. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip17.jpg',
        price: 84588,
        code: "0",
        polki: '2',
        nagr: '1',
        kru: '3'

    },


    {
        link: "pochta_ip18.html",
        title: "К-т ИП-1-0,5/2 ",
        desc: "Металлический инструментальный шкаф К-т ИП-1-0,5/2. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip18.jpg',
        price: 110409,
        code: "0",
        yash: '1',
        polki: '1',
        nagr: '2',
        kru: '3'
    },

    {
        link: "pochta_ip19.html",
        title: "К-т ИП-1-0,5/3",
        desc: "Металлический инструментальный шкаф К-т ИП-1-0,5/3. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip19.jpg',
        price: 91667,
        code: "0",
        polki: '1',
        yash: '1',
        nagr: '2',
        kru: '3'
    },


    {
        link: "pochta_ip20.html",
        title: "К-т ИП-1-0,5/4 ",
        desc: "Металлический инструментальный шкаф К-т ИП-1-0,5/4. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip20.jpg',
        price: 110535,
        code: "0",
        polki: '1',
        yash: '1',
        nagr: '2',
        kru: '3'

    },

    {
        link: "pochta_ip21.html",
        title: "К-т ИП-1-0,5/5 ",
        desc: "Металлический инструментальный шкаф К-т ИП-1-0,5/5. Предназначен для оборудования гаража, мастерской или автосервиса. Может быть использован в качестве тумбы.",
        img: '/images/fulls/pochta/ip21.jpg',
        price: 120905,
        code: "0",
        yash: '3',
        polki: '1',
        nagr: '2',
        kru: '3'
    },

]

const labels = document.getElementById('shkaf9Js');
const monoblocksBlock = document.getElementById('shkaf9Block');
const priceSort = document.getElementById("priceSort");

let priceSortedArray = data.sort(function (a, b) {
  let x = a.price;
  let y = b.price;

  return x - y;
});
let initialArray = priceSortedArray;

let initStage = true;
let priceOptionFirst = document.querySelector(".priceOptionFirst");
let priceOptionSecond = document.querySelector(".priceOptionSecond");

priceOptionFirst.addEventListener("click", function () {
  priceSortedArray = data.sort(function (a, b) {
    let x = a.price;
    let y = b.price;

    return x - y;
  });
  initialArray = priceSortedArray;
  filterArray();
});
priceOptionSecond.addEventListener("click", function () {

  priceSortedArray = data.sort(function (a, b) {
    let x = a.price;
    let y = b.price;

    return y - x;
  });
  initialArray = priceSortedArray;
  filterArray();
});


let myTabOne = document.querySelector('.myTabOne');
let myTabTwo = document.querySelector('.myTabTwo');


myTabOne.addEventListener('click', function() {
    monoblocksBlock.classList.remove('cardProductBlock');
    labels.classList.remove('cardProduct');
});

myTabTwo.addEventListener('click', function() {
    monoblocksBlock.classList.add('cardProductBlock');
    labels.classList.add('cardProduct');
});


function displayBlock(array) {
    monoblocksBlock.innerHTML = "";
    let video = document.createElement('div');
    // <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
    video.innerHTML = `
            <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
           `;

    array.map((a) => {
        let item = document.createElement('div');
        item.classList.add("mainCard");

        var formatter = function(priceSum) {
            let mn = 0;
            let price = priceSum.toString()
            for (let ij = price.length; ij > 0; ij--) {
                if (mn % 3 == 0) {
                    price = [price.slice(0, ij), " ", price.slice(ij)].join('');
                }
                mn++;
            }
            return price;
        }
        item.innerHTML = `
             <div class="cardProductItem">
        <a href="${a.link}">
        <span class="cardProductItem_code">Код товара: ${a.code}</span>
            <div class="cardProductItem_img">
                <img src="${a.img}">
            </div>
            <div class="cardProductItem_content">
                <h3>${a.title} </h3>
              
                <div class="cardProductItem_info">
                    <div class="cardProductItem_info_sub">
                        <div>
                            <img src="/images/productInfo1.png" alt="">
                        </div>
                        <div>
                            <p>Есть в наличии</p>
                        </div>
                    </div>
                    <div class="cardProductItem_info_sub">
                    <div>
                        <img src="/images/productInfo2.png" alt="">
                    </div>
                    <div class="cardProductItem_info_sub_text">
                        <p>Доставка </p>
                        <p><p class="span_free"> - БЕСПЛАТНО</p></p>
                    </div>
                </div>
                    <div class="cardProductItem_info_sub">
                        <div>
                            <img src="/images/productInfo3.png" alt="">
                        </div>
                        <div class="cardProductItem_info_sub_text">
                            <p>Установка</p>
                            <p><p class="span_free"> - БЕСПЛАТНО</p></p>
                        </div>
                    </div>
                </div>
                <div class="cardProductItem_price_btn">
                <span class="cardProductItem_price"> от ${formatter(a.price)}  тг</span>
                </div>
             
            </div>
        </a>
    </div>
           
            `;
        monoblocksBlock.appendChild(item);

    })

}

function displayList(array) {
    labels.innerHTML = "";
    let video = document.createElement('div');
    // 
    video.innerHTML = `
    <p>Звоните прямо сейчас: <br><a href="tel:87273449900">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
        `;

    array.map((a) => {
        let item = document.createElement('div');
        item.classList.add("main");
        var formatter = function(priceSum) {
            let mn = 0;
            let price = priceSum.toString()
            for (let ij = price.length; ij > 0; ij--) {
                if (mn % 3 == 0) {
                    // price.splice(ij, 0, " ")
                    price = [price.slice(0, ij), " ", price.slice(ij)].join('');
                }
                mn++;
            }
            return price;
        }

        item.innerHTML = `
    <li>
    <div id="ggg">
    <div class="firstly">
    <a  href="${a.link}"> 
    <img class="boximagee" src="${a.img}"
               style="float:left">
   </div>
   <br>
   <div class="secondly">
       <h2>${a.title}</h2>
       <hr><span style="color:#CCCCCC; font-size:14px">Код товара: ${a.code}</span><br>
       <p>${a.desc}</p>
       <p><span class="item-price-indicator_second">Цена: от ${formatter(a.price)} тг </span></p>
       </div>
       </a>
       <div class="thirdly">
       <a class="but btn-zayavka" href="${a.link}">Перейти</a>
   </div>
     </div>
    </div>
    </li><br>
    
`;
        labels.appendChild(item);

    })
}

function showInitialStage() {
    displayBlock(initialArray);
    displayList(initialArray);
    let params = countParam(initialArray);
    showParamCounters(params)
}


showInitialStage();

let filterParam = {
    polki: [],
    kru: [],
    yash: [],
    nagr: [],
    ekran: []
}



function filterArray() {
    let updatedArray = initialArray
        .filter(function(a) {
            if (filterParam.polki.length !== 0) {
                for (let i = 0; i < filterParam.polki.length; i++) {
                    if (a.polki === filterParam.polki[i]) {
                        return a;
                    }
                }
            } else {
                return a;
            }
        })

    .filter(function(a) {
        if (filterParam.kru.length !== 0) {
            for (let i = 0; i < filterParam.kru.length; i++) {
                if (a.kru === filterParam.kru[i]) {
                    return a;
                }
            }
        } else {
            return a;
        }
    })

    .filter(function(a) {
        if (filterParam.yash.length !== 0) {
            for (let i = 0; i < filterParam.yash.length; i++) {
                if (a.yash === filterParam.yash[i]) {
                    return a;
                }
            }
        } else {
            return a;
        }
    })

    .filter(function(a) {
        if (filterParam.nagr.length !== 0) {
            for (let i = 0; i < filterParam.nagr.length; i++) {
                if (a.nagr === filterParam.nagr[i]) {
                    return a;
                }
            }
        } else {
            return a;
        }
    })

    .filter(function(a) {
        if (filterParam.ekran.length !== 0) {
            for (let i = 0; i < filterParam.ekran.length; i++) {
                if (a.ekran === filterParam.ekran[i]) {
                    return a;
                }
            }
        } else {
            return a;
        }
    })

    let params = countParam(updatedArray);
    showParamCounters(params)


    if (updatedArray.length !== 0) {
        displayBlock(updatedArray)
        displayList(updatedArray)
        addFilterOption(filterOptionArray)
    } else {
        clickArr[clickArr.length - 1].checked = false;
        clickArr.pop()
        filterOptionArray.pop()
        errorMsg()

        updateFilterParam()
    }
}

let clickArr = []
let filterOptionArray = []
let btnArray = []

const polki1 = document.getElementById('polki1');
const polki2 = document.getElementById('polki2');
const polki3 = document.getElementById('polki3');
const polki4 = document.getElementById('polki4');
const polki5 = document.getElementById('polki5');



const kru1 = document.getElementById('kru1');
const kru2 = document.getElementById('kru2');
const kru3 = document.getElementById('kru3');



const yash1 = document.getElementById('yash1');
const yash2 = document.getElementById('yash2');
const yash3 = document.getElementById('yash3');
const yash4 = document.getElementById('yash4');
const yash5 = document.getElementById('yash5');


const nagr1 = document.getElementById('nagr1');
const nagr2 = document.getElementById('nagr2');


const ekran1 = document.getElementById('ekran1');
const ekran2 = document.getElementById('ekran2');




function updateFilterParam() {
    filterParam.polki = [];
    if (polki1.checked === true) {
        filterParam.polki.push('1');
    }
    if (polki2.checked === true) {
        filterParam.polki.push('2');
    }
    if (polki3.checked === true) {
        filterParam.polki.push('3');
    }
    if (polki4.checked === true) {
        filterParam.polki.push('4');
    }
    if (polki5.checked === true) {
        filterParam.polki.push('5');
    }


    filterParam.yash = [];
    if (yash1.checked === true) {
        filterParam.yash.push('1');
    }
    if (yash2.checked === true) {
        filterParam.yash.push('2');
    }
    if (yash3.checked === true) {
        filterParam.yash.push('3');
    }

    if (yash4.checked === true) {
        filterParam.yash.push('4');
    }
    if (yash5.checked === true) {
        filterParam.yash.push('5');
    }
    filterParam.nagr = [];
    if (nagr1.checked === true) {
        filterParam.nagr.push('1');
    }
    if (nagr2.checked === true) {
        filterParam.nagr.push('2');
    }

    filterParam.ekran = [];
    if (ekran1.checked === true) {
        filterParam.ekran.push('1');
    }
    if (ekran2.checked === true) {
        filterParam.ekran.push('2');
    }

    filterParam.kru = [];
    if (kru1.checked === true) {
        filterParam.kru.push('1');
    }
    if (kru2.checked === true) {
        filterParam.kru.push('2');
    }
    if (kru3.checked === true) {
        filterParam.kru.push('3');
    }


    filterArray()
}

function spliceMethod(value) {
    const idx = clickArr.indexOf(value);
    if (idx > -1) {
        clickArr.splice(idx, 1);
    }
}

function spliceMethodSecond(value) {
    const idx = filterOptionArray.indexOf(value);
    if (idx > -1) {
        filterOptionArray.splice(idx, 1);
    }
}




function polki1BtnClick() {
    if (polki1.checked == true) {
        filterOptionArray.push('1 шт:')
        clickArr.push(polki1)
        arrCounter = true;
    } else {
        spliceMethod(polki1);
        spliceMethodSecond('1 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}

function polki2BtnClick() {
    if (polki2.checked == true) {
        filterOptionArray.push('2 шт:')
        clickArr.push(polki2)
        arrCounter = true;
    } else {
        spliceMethod(polki2);
        spliceMethodSecond('2 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}

function polki3BtnClick() {
    if (polki3.checked == true) {
        filterOptionArray.push('3 шт:')
        clickArr.push(polki3)
        arrCounter = true;
    } else {
        spliceMethod(polki3);
        spliceMethodSecond('3 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}


function polki4BtnClick() {
    if (polki4.checked == true) {
        filterOptionArray.push('4 шт:')
        clickArr.push(polki4)
        arrCounter = true;
    } else {
        spliceMethod(polki4);
        spliceMethodSecond('4 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}



function polki5BtnClick() {
    if (polki5.checked == true) {
        filterOptionArray.push('5 шт:')
        clickArr.push(polki5)
        arrCounter = true;
    } else {
        spliceMethod(polki5);
        spliceMethodSecond('5 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}



function kru1BtnClick() {
    if (kru1.checked == true) {
        filterOptionArray.push('5 см:')
        clickArr.push(kru1)
        arrCounter = true;
    } else {
        spliceMethod(kru1);
        spliceMethodSecond('5 см:')
        arrCounter = false;
    }
    updateFilterParam()
}


function kru2BtnClick() {
    if (kru2.checked == true) {
        filterOptionArray.push('8 см:')
        clickArr.push(kru2)
        arrCounter = true;
    } else {
        spliceMethod(kru2);
        spliceMethodSecond('8 см:')
        arrCounter = false;
    }
    updateFilterParam()
}

function kru3BtnClick() {
    if (kru3.checked == true) {
        filterOptionArray.push('без крючков:')
        clickArr.push(kru3)
        arrCounter = true;
    } else {
        spliceMethod(kru3);
        spliceMethodSecond('без крючков:')
        arrCounter = false;
    }
    updateFilterParam()
}


function yash1BtnClick() {
    if (yash1.checked == true) {
        filterOptionArray.push('1 шт:')
        clickArr.push(yash1)
        arrCounter = true;
    } else {
        spliceMethod(yash1);
        spliceMethodSecond('1 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}

function yash2BtnClick() {
    if (yash2.checked == true) {
        filterOptionArray.push('2 шт:')
        clickArr.push(yash2)
        arrCounter = true;
    } else {
        spliceMethod(yash2);
        spliceMethodSecond('2 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}

function yash3BtnClick() {
    if (yash3.checked == true) {
        filterOptionArray.push('3 шт:')
        clickArr.push(yash3)
        arrCounter = true;
    } else {
        spliceMethod(yash3);
        spliceMethodSecond('3 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}


function yash4BtnClick() {
    if (yash4.checked == true) {
        filterOptionArray.push('4 шт:')
        clickArr.push(yash4)
        arrCounter = true;
    } else {
        spliceMethod(yash4);
        spliceMethodSecond('4 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}

function yash5BtnClick() {
    if (yash5.checked == true) {
        filterOptionArray.push('5 шт:')
        clickArr.push(yash5)
        arrCounter = true;
    } else {
        spliceMethod(yash5);
        spliceMethodSecond('5 шт:')
        arrCounter = false;
    }
    updateFilterParam()
}



function nagr1BtnClick() {
    if (nagr1.checked == true) {
        filterOptionArray.push('560 кг:')
        clickArr.push(nagr1)
        arrCounter = true;
    } else {
        spliceMethod(nagr1);
        spliceMethodSecond('560 кг:')
        arrCounter = false;
    }
    updateFilterParam()
}


function nagr2BtnClick() {
    if (nagr2.checked == true) {
        filterOptionArray.push('400 кг:')
        clickArr.push(nagr2)
        arrCounter = true;
    } else {
        spliceMethod(nagr2);
        spliceMethodSecond('400 кг:')
        arrCounter = false;
    }
    updateFilterParam()
}



function ekran1BtnClick() {
    if (ekran1.checked == true) {
        filterOptionArray.push('1:')
        clickArr.push(ekran1)
        arrCounter = true;
    } else {
        spliceMethod(ekran1);
        spliceMethodSecond('1:')
        arrCounter = false;
    }
    updateFilterParam()
}

function ekran2BtnClick() {
    if (ekran2.checked == true) {
        filterOptionArray.push('2:')
        clickArr.push(ekran2)
        arrCounter = true;
    } else {
        spliceMethod(ekran2);
        spliceMethodSecond('2:')
        arrCounter = false;
    }
    updateFilterParam()
}



polki1.addEventListener('click', polki1BtnClick)
polki2.addEventListener('click', polki2BtnClick)
polki3.addEventListener('click', polki3BtnClick)
polki4.addEventListener('click', polki4BtnClick)
polki5.addEventListener('click', polki5BtnClick)

kru1.addEventListener('click', kru1BtnClick)
kru2.addEventListener('click', kru2BtnClick)
kru3.addEventListener('click', kru3BtnClick)

yash1.addEventListener('click', yash1BtnClick)
yash2.addEventListener('click', yash2BtnClick)
yash3.addEventListener('click', yash3BtnClick)
yash4.addEventListener('click', yash4BtnClick)
yash5.addEventListener('click', yash5BtnClick)


nagr1.addEventListener('click', nagr1BtnClick)
nagr2.addEventListener('click', nagr2BtnClick)

ekran1.addEventListener('click', ekran1BtnClick)
ekran2.addEventListener('click', ekran2BtnClick)


// let checkBoxArr = []
//     // settings関数で初期設定 全体に適応させたい場合
// iziToast.settings({
//     timeout: 3000, // default timeout
//     resetOnHover: true,
//     // icon: '', // icon class
//     transitionIn: 'flipInX',
//     transitionOut: 'flipOutX',
//     position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center
//     onOpen: function() {
//         // console.log('callback abriu!');
//     },
//     onClose: function() {
//         // console.log("callback fechou!");
//     }
// });


// error
// function errorMsg() {
//     iziToast.warning({ title: '', message: 'По таким параметрам продуктов не найдено' });
// }


const filter = document.getElementById("filter");
let arrCounter = true;

function addFilterOption(arr) {
    let index = 0;
    filter.innerHTML = "";
    arr.map(a => {
        let filterOption = document.createElement('div');
        filterOption.setAttribute("data-id", index)
        filterOption.id = "filterOption"
        filterOption.classList.add('filter-option')
        if (arrCounter == true) {
            filterOption.classList.add('filter-animation')
        }
        if (index > 0) {
            document.querySelector(`[data-id="${index - 1}"]`).classList.remove('filter-animation');
        }
        filterOption.innerHTML = `
    <span class="filter-option-value" data-id="${index}">${a} 
        <svg xmlns="https://www.w3.org/2000/svg" style="
        pointer-events: none;
        margin-left: 8.5px;" data-id="${index} width="10px" height="10px" viewBox="0 0 7 7" id="filterOptionSvg" fill="none">
            <path data-id="${index} id="filterOptionPath" fill-rule="evenodd" clip-rule="evenodd" d="M4.00199 4.7091L6.64844 7.35554L7.35554 6.64844L4.7091 4.00199L7.35554 1.35554L6.64844 0.648438L4.00199 3.29488L1.35554 0.648438L0.648438 1.35554L3.29488 4.00199L0.648438 6.64844L1.35554 7.35554L4.00199 4.7091Z" fill="#C4C4C4"></path>
        </svg>
    </span>
    `;
        filter.appendChild(filterOption);
        index++;
    })
}

let filterOption = document.querySelector(".filter-option");

document.addEventListener(
    "click",
    function(e) {
        e = e || window.event;
        let target = e.srcElement;
        if (
            target.id === "filterOption" ||
            target.parentNode.id === "filterOption"
        ) {
            arrCounter = false;
            let selectedId = parseInt(target.getAttribute('data-id'), 10);
            removeFilterElement(selectedId)
        }
    },
    false
);


function removeFilterElement(value) {
    filterOptionArray.splice(value, 1);
    clickArr[value].checked = false;
    clickArr.splice(value, 1)
    updateFilterParam();
}

function countParam(array) {

    let polki1 = 0;
    let polki2 = 0;
    let polki3 = 0;
    let polki4 = 0;
    let polki5 = 0;

    let kru1 = 0;
    let kru2 = 0;
    let kru3 = 0;

    let yash1 = 0;
    let yash2 = 0;
    let yash3 = 0;
    let yash4 = 0;
    let yash5 = 0;

    let nagr1 = 0;
    let nagr2 = 0;

    let ekran1 = 0;
    let ekran2 = 0;


    let sections1 = 0;
    let sections2 = 0;
    let sections3 = 0;
    let sections4 = 0;
    let sections5 = 0;





    for (let index = 0; index < array.length; index++) {

        if (array[index].polki == '1') {
            polki1++;
        } else if (array[index].polki == '2') {
            polki2++;
        } else if (array[index].polki == '3') {
            polki3++;
        } else if (array[index].polki == '4') {
            polki4++;
        } else if (array[index].polki == '5') {
            polki5++;
        }

        if (array[index].kru == '1') {
            kru1++;
        } else if (array[index].kru == '2') {
            kru2++;
        } else if (array[index].kru == '3') {
            kru3++;
        }

        if (array[index].yash == '1') {
            yash1++;
        } else if (array[index].yash == '2') {
            yash2++;
        } else if (array[index].yash == '3') {
            yash3++;
        } else if (array[index].yash == '4') {
            yash4++;
        } else if (array[index].yash == '5') {
            yash5++;
        }


        if (array[index].nagr == '1') {
            nagr1++;
        } else if (array[index].nagr == '2') {
            nagr2++;
        }


        if (array[index].ekran == '1') {
            ekran1++;
        } else if (array[index].ekran == '2') {
            ekran2++;
        }





        if (array[index].sections == '1') {
            sections1++;
        } else if (array[index].sections == '2') {
            sections2++;
        } else if (array[index].sections == '3') {
            sections3++;
        } else if (array[index].sections == '4') {
            sections4++;
        } else if (array[index].sections == '6') {
            sections5++;
        }
    }

    return [polki1, polki2, polki3, polki4, polki5, kru1, kru2, kru3, yash1, yash2, yash3, yash4, yash5, nagr1, nagr2, ekran1, ekran2]

}

function showParamCounters(array) {
    for (let index = 0; index < array.length; index++) {
        document.getElementById(`${index+1}param`).innerHTML = array[index]
    }
}

// var filename = window.location.href.split('/').pop().split('#')[0].split('?')[0];
// console.log(filename);