// ____________________________________Кассовые боксы EL - серия___________________________________________
const data = [{
        link: "kassovyie_boksyi17.html",
        title: "Кассовый бокс энергия, универсальный",
        desc: "Кассовый бокс красный универсальный - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5115",
        color: 'redBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_c2.html",
        title: "Кассовый бокс энергия, универсальный синий",
        desc: "Кассовый бокс энергия, универсальный синий - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew17_2.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5344",
        color: 'blueBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_c3.html",
        title: "Кассовый бокс энергия, универсальный желтый",
        desc: "Кассовый бокс энергия, универсальный желтый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew17_3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5345",
        color: 'yellowBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_c4.html",
        title: "Кассовый бокс энергия, универсальный зеленый",
        desc: "Кассовый бокс энергия, универсальный зеленый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew17_4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5342",
        color: 'greenBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_c5.html",
        title: "Кассовый бокс энергия, универсальный серый",
        desc: "Кассовый бокс энергия, универсальный серый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew17_5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5346",
        color: 'grayBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_c6.html",
        title: "Кассовый бокс энергия, универсальный черный",
        desc: "Кассовый бокс энергия, универсальный черный - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew17_6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 75505,
        code: "5348",
        color: 'blackBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi17_deng.html",
        title: "Кассовый бокс энергия, универсальный с денежным ящиком",
        desc: "Кассовый бокс энергия, универсальный синий - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew3Deng.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 115330,
        code: "5115",
        color: 'redBtn',
        vid: 'vidBtn1',
        razmer: 'razmerBtn1'
    },
    {
        link: "kassovyie_boksyi18.html",
        title: "Кассовый бокс энергия, с глубоким накопителем",
        desc: "Кассовый бокс энергия, с глубоким накопителем - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5114",
        color: 'redBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },

    {
        link: "kassovyie_boksyi18_c2.html",
        title: "Кассовый бокс энергия, с глубоким накопителем синий",
        desc: "Кассовый бокс энергия, с глубоким накопителем синий - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew18_2.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5412",
        color: 'blueBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },
    {
        link: "kassovyie_boksyi18_c3.html",
        title: "Кассовый бокс энергия, с глубоким накопителем желтый",
        desc: "Кассовый бокс энергия, с глубоким накопителем желтый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew18_3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5377",
        color: 'yellowBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },
    {
        link: "kassovyie_boksyi18_c4.html",
        title: "Кассовый бокс энергия, с глубоким накопителем зеленый",
        desc: "Кассовый бокс энергия, с глубоким накопителем зеленый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew18_4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5376",
        color: 'greenBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },
    {
        link: "kassovyie_boksyi18_c5.html",
        title: "Кассовый бокс энергия, с глубоким накопителем серый",
        desc: "Кассовый бокс энергия, с глубоким накопителем серый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew18_5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5378",
        color: 'grayBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },
    {
        link: "kassovyie_boksyi18_c6.html",
        title: "Кассовый бокс энергия, с глубоким накопителем черный",
        desc: "Кассовый бокс энергия, с глубоким накопителем черный - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew18_6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 74306,
        code: "5380",
        color: 'blackBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },
    {
        link: "kassovyie_boksyi18_deng.html",
        title: "Кассовый бокс энергия, с глубоким накопителем, с денежным ящиком",
        desc: "Кассовый бокс энергия, с глубоким накопителем, с денежным ящиком - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew4Deng.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 114131,
        code: "5114",
        color: 'redBtn',
        vid: 'vidBtn2',
        razmer: 'razmerBtn2'
    },

    {
        link: "kassovyie_boksyi19.html",
        title: "Кассовый бокс энергия, с широким накопителем",
        desc: "Кассовый бокс энергия, с широким накопителем - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5341",
        color: 'redBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_c2.html",
        title: "Кассовый бокс энергия, с широким накопителем синий",
        desc: "Кассовый бокс энергия, с широким накопителем синий - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew19_2.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5462",
        color: 'blueBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_c3.html",
        title: "Кассовый бокс энергия, с широким накопителем желтый",
        desc: "Кассовый бокс энергия, с широким накопителем желтый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew19_3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5464",
        color: 'yellowBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_c4.html",
        title: "Кассовый бокс энергия, с широким накопителем зеленый",
        desc: "Кассовый бокс энергия, с широким накопителем зеленый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew19_4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5461",
        color: 'greenBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_c5.html",
        title: "Кассовый бокс энергия, с широким накопителем серый",
        desc: "Кассовый бокс энергия, с широким накопителем серый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew19_5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5472",
        color: 'grayBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_c6.html",
        title: "Кассовый бокс энергия, с широким накопителем черный",
        desc: "Кассовый бокс энергия, с широким накопителем черный - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew19_6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 122535,
        code: "5470",
        color: 'blackBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi19_deng.html",
        title: "Кассовый бокс энергия, с широким накопителем, с денежным ящиком",
        desc: "Кассовый бокс энергия, с широким накопителем, с денежным ящиком - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew5Deng.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 162360,
        code: "5341",
        color: 'redBtn',
        vid: 'vidBtn3',
        razmer: 'razmerBtn3'
    },

    {
        link: "kassovyie_boksyi20.html",
        title: "Кассовый бокс энергия, с двойным накопителем",
        desc: "Кассовый бокс энергия, с двойным накопителем - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "5118",
        color: 'redBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_c2.html",
        title: "Кассовый бокс энергия, с двойным накопителем синий",
        desc: "Кассовый бокс энергия, с двойным накопителем синий - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew20_2.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "5465",
        color: 'blueBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_c3.html",
        title: "Кассовый бокс энергия, с двойным накопителем желтый",
        desc: "Кассовый бокс энергия, с двойным накопителем желтый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew20_3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "0",
        color: 'yellowBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_c4.html",
        title: "Кассовый бокс энергия, с двойным накопителем зеленый",
        desc: "Кассовый бокс энергия, с двойным накопителем зеленый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew20_4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "5364",
        color: 'greenBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_c5.html",
        title: "Кассовый бокс энергия, с двойным накопителем серый",
        desc: "Кассовый бокс энергия, с двойным накопителем серый - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew20_5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "5363",
        color: 'grayBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_c6.html",
        title: "Кассовый бокс энергия, с двойным накопителем черный",
        desc: "Кассовый бокс энергия, с двойным накопителем черный - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew20_6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 150478,
        code: "0",
        color: 'blackBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi20_deng.html",
        title: "Кассовый бокс энергия, с двойным накопителем, с денежным ящиком ",
        desc: "Кассовый бокс энергия, с двойным накопителем, с денежным ящиком  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew6Deng.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 189763,
        code: "5118",
        color: 'redBtn',
        vid: 'vidBtn4',
        razmer: 'razmerBtn4'
    },

    {
        link: "kassovyie_boksyi21.html",
        title: "Кассовый бокс энергия, c транспортером",
        desc: "Кассовый бокс энергия, c транспортером  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew7.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "5118",
        color: 'redBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },

    {
        link: "kassovyie_boksyi21_c2.html",
        title: "Кассовый бокс энергия, c транспортером синий",
        desc: "Кассовый бокс энергия, c транспортером синий  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew21_2.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "5465",
        color: 'blueBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },
    {
        link: "kassovyie_boksyi21_c3.html",
        title: "Кассовый бокс энергия, c транспортером желтый",
        desc: "Кассовый бокс энергия, c транспортером желтый  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew21_3.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "0",
        color: 'yellowBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },

    {
        link: "kassovyie_boksyi21_c4.html",
        title: "Кассовый бокс энергия, c транспортером зеленый",
        desc: "Кассовый бокс энергия, c транспортером зеленый  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew21_4.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "5364",
        color: 'greenBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },

    {
        link: "kassovyie_boksyi21_c5.html",
        title: "Кассовый бокс энергия, c транспортером серый",
        desc: "Кассовый бокс энергия, c транспортером серый  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew21_5.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "5363",
        color: 'grayBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },

    {
        link: "kassovyie_boksyi21_c6.html",
        title: "Кассовый бокс энергия, c транспортером черный",
        desc: "Кассовый бокс энергия, c транспортером черный  - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew21_6.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 326959,
        code: "0",
        color: 'blackBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },

    {
        link: "kassovyie_boksyi21_deng.html",
        title: "Кассовый бокс с транспортером с денежным ящиком",
        desc: "Кассовый бокс с транспортером с денежным ящиком - идеальное решение для современного супермаркета или магазинов самообслуживания.",
        img: "/images/fulls/kas/kasNew7Deng.png",
        // img2: "/themes/images/products/shkaf/polair/main/9.jpg",
        price: 366784,
        code: "0",
        color: 'redBtn',
        vid: 'vidBtn5',
        razmer: 'razmerBtn5'
    },
]
const monoblocks = document.getElementById('monoblocks');
const monoblocksBlock = document.getElementById('monoblocksBlock');

const priceSort = document.getElementById("priceSort");

let priceSortedArray = data.sort(function (a, b) {
  let x = a.price;
  let y = b.price;

  return x - y;
});
let initialArray = priceSortedArray;

let initStage = true;
let priceOptionFirst = document.querySelector(".priceOptionFirst");
let priceOptionSecond = document.querySelector(".priceOptionSecond");

priceOptionFirst.addEventListener("click", function () {
  priceSortedArray = data.sort(function (a, b) {
    let x = a.price;
    let y = b.price;

    return x - y;
  });
  initialArray = priceSortedArray;
  filterArray();
});
priceOptionSecond.addEventListener("click", function () {

  priceSortedArray = data.sort(function (a, b) {
    let x = a.price;
    let y = b.price;

    return y - x;
  });
  initialArray = priceSortedArray;
  filterArray();
});


let myTabOne = document.querySelector('.myTabOne');
let myTabTwo = document.querySelector('.myTabTwo');


myTabOne.addEventListener('click', function() {
    monoblocksBlock.classList.remove('cardProductBlock');
    monoblocks.classList.remove('cardProduct');
});

myTabTwo.addEventListener('click', function() {
    monoblocksBlock.classList.add('cardProductBlock');
    monoblocks.classList.add('cardProduct');
});



function displayBlock(array) {
    monoblocksBlock.innerHTML = "";
    let video = document.createElement('div');
    // <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
    video.innerHTML = `
            <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
           `;

    array.map((a) => {
        let item = document.createElement('div');
        item.classList.add("mainCard");

        var formatter = function(priceSum) {
            let mn = 0;
            let price = priceSum.toString()
            for (let ij = price.length; ij > 0; ij--) {
                if (mn % 3 == 0) {
                    price = [price.slice(0, ij), " ", price.slice(ij)].join('');
                }
                mn++;
            }
            return price;
        }
        item.innerHTML = `
             <div class="cardProductItem">
        <a href="${a.link}">
        <span class="cardProductItem_code">Код товара: ${a.code}</span>
            <div class="cardProductItem_img">
                <img src="${a.img}">
            </div>
            <div class="cardProductItem_content">
                <h3>${a.title} </h3>
              
                <div class="cardProductItem_info">
                    <div class="cardProductItem_info_sub">
                        <div>
                            <img src="/images/productInfo1.png" alt="">
                        </div>
                        <div>
                            <p>Есть в наличии</p>
                        </div>
                    </div>
                    <div class="cardProductItem_info_sub">
                    <div>
                        <img src="/images/productInfo2.png" alt="">
                    </div>
                    <div class="cardProductItem_info_sub_text">
                        <p>Доставка </p>
                        <p><p class="span_free"> - БЕСПЛАТНО</p></p>
                    </div>
                </div>
                    <div class="cardProductItem_info_sub">
                        <div>
                            <img src="/images/productInfo3.png" alt="">
                        </div>
                        <div class="cardProductItem_info_sub_text">
                            <p>Установка</p>
                            <p><p class="span_free"> - БЕСПЛАТНО</p></p>
                        </div>
                    </div>
                </div>
                <div class="cardProductItem_price_btn">
                <span class="cardProductItem_price"> от ${formatter(a.price)}  тг</span>
                </div>
            </div>
        </a>
    </div>
            `;
        monoblocksBlock.appendChild(item);

    })

}





function displayList(array) {
    monoblocks.innerHTML = "";
    let video = document.createElement('div');
    // <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
    video.innerHTML = `
        <p>Звоните прямо сейчас: <br><a href="tel:87015112200">8(727)<span> 344-99-00</span></a>; <a href="tel:+77012667700"><b>+7 701 266-77-00</b></a></p>
       `;

    array.map((a) => {
        let item = document.createElement('div');
        item.classList.add("main");

        var formatter = function(priceSum) {
            let mn = 0;
            let price = priceSum.toString()
            for (let ij = price.length; ij > 0; ij--) {
                if (mn % 3 == 0) {
                    price = [price.slice(0, ij), " ", price.slice(ij)].join('');
                }
                mn++;
            }
            return price;
        }
        item.innerHTML = `
       <li>
       <div id="ggg">
       <div class="firstly">
       <a  href="${a.link}"> 
       <img class="boximagee" src="${a.img}"
                  style="float:left">
      </div>
      <br>
      <div class="secondly">
          <h2>${a.title}</h2>
          <hr><span style="color:#CCCCCC; font-size:14px">Код товара: ${a.code}</span><br>
          <p>${a.desc}</p>
          <p><span class="item-price-indicator_second">Цена: от ${formatter(a.price)} тг </span></p>
          </div>
          </a>
          <div class="thirdly">
          <a class="but btn-zayavka" href="${a.link}">Перейти</a>
      </div>
        </div>
       </div>
       </li><br>

        `;
        monoblocks.appendChild(item);

    })
}



function showInitialStage() {
    displayBlock(initialArray);
    displayList(initialArray);
    let params = countParam(initialArray);
    showParamCounters(params)
}

// function showInitialStage() {
//     displayList(initialArray);
//     let params = countParam(initialArray);
//     showParamCounters(params)
// }


showInitialStage();

let filterParam = {
    color: [],
    vid: [],
    razmer: []
}


function filterArray() {
    let updatedArray = initialArray.filter(function(a) {
            if (filterParam.color.length !== 0) {
                for (let i = 0; i < filterParam.color.length; i++) {
                    if (a.color === filterParam.color[i]) {
                        return a;
                    }
                }
            } else {
                return a;
            }
        })
        .filter(function(a) {
            if (filterParam.vid.length !== 0) {
                for (let i = 0; i < filterParam.vid.length; i++) {
                    if (a.vid === filterParam.vid[i]) {
                        return a;
                    }
                }
            } else {
                return a;
            }
        })
        .filter(function(a) {
            if (filterParam.razmer.length !== 0) {
                for (let i = 0; i < filterParam.razmer.length; i++) {
                    if (a.razmer === filterParam.razmer[i]) {
                        return a;
                    }
                }
            } else {
                return a;
            }
        })

    let params = countParam(updatedArray);
    showParamCounters(params)
        // console.log(params);


    if (updatedArray.length !== 0) {
        displayBlock(updatedArray)
        displayList(updatedArray)
        addFilterOption(filterOptionArray)
    } else {
        clickArr[clickArr.length - 1].checked = false;
        clickArr.pop()
        filterOptionArray.pop()
        errorMsg()
            // console.log(clickArr);
            // console.log(filterOptionArray)
        updateFilterParam()
    }
    // if (updatedArray.length !== 0) {
    //     displayList(updatedArray)
    //     addFilterOption(filterOptionArray)
    // } else {
    //     clickArr[clickArr.length - 1].checked = false;
    //     clickArr.pop()
    //     filterOptionArray.pop()
    //     errorMsg()
    //         // console.log(clickArr);
    //         // console.log(filterOptionArray)
    //     updateFilterParam()
    // }

    // console.log(filterParam);
}

let clickArr = []
let filterOptionArray = []
let btnArray = []

const redBtn = document.getElementById('redBtn');
const blueBtn = document.getElementById('blueBtn');
const yellowBtn = document.getElementById('yellowBtn');
const greenBtn = document.getElementById('greenBtn');
const grayBtn = document.getElementById('grayBtn');
const blackBtn = document.getElementById('blackBtn');

const vidBtn1 = document.getElementById('vidBtn1');
const vidBtn2 = document.getElementById('vidBtn2');
const vidBtn3 = document.getElementById('vidBtn3');
const vidBtn4 = document.getElementById('vidBtn4');

const razmerBtn1 = document.getElementById('razmerBtn1');
const razmerBtn2 = document.getElementById('razmerBtn2');
const razmerBtn3 = document.getElementById('razmerBtn3');
const razmerBtn4 = document.getElementById('razmerBtn4');
const razmerBtn5 = document.getElementById('razmerBtn5');



function updateFilterParam() {
    filterParam.color = [];

    if (redBtn.checked === true) {
        filterParam.color.push('redBtn');
    }

    if (blueBtn.checked === true) {
        filterParam.color.push('blueBtn');
    }

    if (yellowBtn.checked === true) {
        filterParam.color.push('yellowBtn');
    }

    if (greenBtn.checked === true) {
        filterParam.color.push('greenBtn');
    }

    if (grayBtn.checked === true) {
        filterParam.color.push('grayBtn');
    }

    if (blackBtn.checked === true) {
        filterParam.color.push('blackBtn');
    }

    filterParam.vid = [];

    if (vidBtn1.checked === true) {
        filterParam.vid.push('vidBtn1');
    }

    if (vidBtn2.checked === true) {
        filterParam.vid.push('vidBtn2');
    }

    if (vidBtn3.checked === true) {
        filterParam.vid.push('vidBtn3');
    }

    if (vidBtn4.checked === true) {
        filterParam.vid.push('vidBtn4');
    }

    filterParam.razmer = [];

    if (razmerBtn1.checked === true) {
        filterParam.razmer.push('razmerBtn1');
    }

    if (razmerBtn2.checked === true) {
        filterParam.razmer.push('razmerBtn2');
    }

    if (razmerBtn3.checked === true) {
        filterParam.razmer.push('razmerBtn3');
    }

    if (razmerBtn4.checked === true) {
        filterParam.razmer.push('razmerBtn4');
    }

    if (razmerBtn5.checked === true) {
        filterParam.razmer.push('razmerBtn5');
    }

    filterArray()
}

function spliceMethod(value) {
    const idx = clickArr.indexOf(value);
    if (idx > -1) {
        clickArr.splice(idx, 1);
    }
}

function spliceMethodSecond(value) {
    const idx = filterOptionArray.indexOf(value);
    if (idx > -1) {
        filterOptionArray.splice(idx, 1);
    }
}

function redBtnClick() {
    if (redBtn.checked == true) {
        filterOptionArray.push('красный')
        clickArr.push(redBtn)
        arrCounter = true;
    } else {
        spliceMethod(redBtn);
        spliceMethodSecond('красный')
        arrCounter = false;
    }
    updateFilterParam()
}

function blueBtnClick() {
    if (blueBtn.checked == true) {
        filterOptionArray.push('Синий')
        clickArr.push(blueBtn)
        arrCounter = true;
    } else {
        spliceMethod(blueBtn);
        spliceMethodSecond('Синий')
        arrCounter = false;
    }
    updateFilterParam()
}

function yellowBtnClick() {
    if (yellowBtn.checked == true) {
        filterOptionArray.push('Желтый')
        clickArr.push(yellowBtn)
        arrCounter = true;
    } else {
        spliceMethod(yellowBtn);
        spliceMethodSecond('Желтый')
        arrCounter = false;
    }
    updateFilterParam()
}


function greenBtnClick() {
    if (greenBtn.checked == true) {
        filterOptionArray.push('Зеленый')
        clickArr.push(greenBtn)
        arrCounter = true;
    } else {
        spliceMethod(greenBtn);
        spliceMethodSecond('Зеленый')
        arrCounter = false;
    }
    updateFilterParam()
}


function grayBtnClick() {
    if (grayBtn.checked == true) {
        filterOptionArray.push('Серый')
        clickArr.push(grayBtn)
        arrCounter = true;
    } else {
        spliceMethod(grayBtn);
        spliceMethodSecond('Серый')
        arrCounter = false;
    }
    updateFilterParam()
}

function blackBtnClick() {
    if (blackBtn.checked == true) {
        filterOptionArray.push('Черный')
        clickArr.push(blackBtn)
        arrCounter = true;
    } else {
        spliceMethod(blackBtn);
        spliceMethodSecond('Черный')
        arrCounter = false;
    }
    updateFilterParam()
}

function vidBtn1Click() {
    if (vidBtn1.checked == true) {
        filterOptionArray.push('Универсальный')
        clickArr.push(vidBtn1)
        arrCounter = true;
    } else {
        spliceMethod(vidBtn1);
        spliceMethodSecond('Универсальный')
        arrCounter = false;
    }
    updateFilterParam()
}

function vidBtn2Click() {
    if (vidBtn2.checked == true) {
        filterOptionArray.push('С глубоким накопителем')
        clickArr.push(vidBtn2)
        arrCounter = true;
    } else {
        spliceMethod(vidBtn2);
        spliceMethodSecond('С глубоким накопителем')
        arrCounter = false;
    }
    updateFilterParam()
}


function vidBtn3Click() {
    if (vidBtn3.checked == true) {
        filterOptionArray.push('С двойным накопителем')
        clickArr.push(vidBtn3)
        arrCounter = true;
    } else {
        spliceMethod(vidBtn3);
        spliceMethodSecond('С двойным накопителем')
        arrCounter = false;
    }
    updateFilterParam()
}

function vidBtn4Click() {
    if (vidBtn4.checked == true) {
        filterOptionArray.push('С двойным накопителем и транспортером')
        clickArr.push(vidBtn4)
        arrCounter = true;
    } else {
        spliceMethod(vidBtn4);
        spliceMethodSecond('С двойным накопителем и транспортером')
        arrCounter = false;
    }
    updateFilterParam()
}

function vidBtn5Click() {
    if (vidBtn5.checked == true) {
        filterOptionArray.push('С двойным накопителем и удлиненным транспортером')
        clickArr.push(vidBtn5)
        arrCounter = true;
    } else {
        spliceMethod(vidBtn5);
        spliceMethodSecond('С двойным накопителем и удлиненным транспортером')
        arrCounter = false;
    }
    updateFilterParam()
}





function razmerBtn1Click() {
    if (razmerBtn1.checked == true) {
        filterOptionArray.push('1500x1090x860 мм')
        clickArr.push(razmerBtn1)
        arrCounter = true;
    } else {
        spliceMethod(razmerBtn1);
        spliceMethodSecond('1500x1040x870 мм')
        arrCounter = false;
    }
    updateFilterParam()
}



function razmerBtn2Click() {
    if (razmerBtn2.checked == true) {
        filterOptionArray.push('1500x1040x870 мм')
        clickArr.push(razmerBtn2)
        arrCounter = true;
    } else {
        spliceMethod(razmerBtn2);
        spliceMethodSecond('1500x1040x870 мм')
        arrCounter = false;
    }
    updateFilterParam()
}

function razmerBtn3Click() {
    if (razmerBtn3.checked == true) {
        filterOptionArray.push('1900x1040x870 мм')
        clickArr.push(razmerBtn3)
        arrCounter = true;
    } else {
        spliceMethod(razmerBtn3);
        spliceMethodSecond('1900x1040x870 мм')
        arrCounter = false;
    }
    updateFilterParam()
}


function razmerBtn4Click() {
    if (razmerBtn4.checked == true) {
        filterOptionArray.push('1840x1020x860 мм')
        clickArr.push(razmerBtn4)
        arrCounter = true;
    } else {
        spliceMethod(razmerBtn4);
        spliceMethodSecond('1840x1020x860 мм')
        arrCounter = false;
    }
    updateFilterParam()
}

function razmerBtn5Click() {
    if (razmerBtn5.checked == true) {
        filterOptionArray.push('2255x1050x860 мм')
        clickArr.push(razmerBtn5)
        arrCounter = true;
    } else {
        spliceMethod(razmerBtn5);
        spliceMethodSecond('2255x1050x860 мм')
        arrCounter = false;
    }
    updateFilterParam()
}



redBtn.addEventListener('click', redBtnClick)
blueBtn.addEventListener('click', blueBtnClick)
yellowBtn.addEventListener('click', yellowBtnClick)
greenBtn.addEventListener('click', greenBtnClick)
grayBtn.addEventListener('click', grayBtnClick)
blackBtn.addEventListener('click', blackBtnClick)

vidBtn1.addEventListener('click', vidBtn1Click)
vidBtn2.addEventListener('click', vidBtn2Click)
vidBtn3.addEventListener('click', vidBtn3Click)
vidBtn4.addEventListener('click', vidBtn4Click)


razmerBtn1.addEventListener('click', razmerBtn1Click)
razmerBtn2.addEventListener('click', razmerBtn2Click)
razmerBtn3.addEventListener('click', razmerBtn3Click)
razmerBtn4.addEventListener('click', razmerBtn4Click)
razmerBtn5.addEventListener('click', razmerBtn5Click)


// let checkBoxArr = []
//     // settings関数で初期設定 全体に適応させたい場合
// iziToast.settings({
//     timeout: 3000, // default timeout
//     resetOnHover: true,
//     // icon: '', // icon class
//     transitionIn: 'flipInX',
//     transitionOut: 'flipOutX',
//     position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center
//     onOpen: function() {
//         // console.log('callback abriu!');
//     },
//     onClose: function() {
//         // console.log("callback fechou!");
//     }
// });


// error
// function errorMsg() {
//     iziToast.warning({ title: '', message: 'По таким параметрам продуктов не найдено' });
// }


const filter = document.getElementById("filter");
let arrCounter = true;

function addFilterOption(arr) {
    let index = 0;
    filter.innerHTML = "";
    arr.map(a => {
        let filterOption = document.createElement('div');
        filterOption.setAttribute("data-id", index)
        filterOption.id = "filterOption"
        filterOption.classList.add('filter-option')
        if (arrCounter == true) {
            filterOption.classList.add('filter-animation')
        }
        if (index > 0) {
            document.querySelector(`[data-id="${index - 1}"]`).classList.remove('filter-animation');
        }
        filterOption.innerHTML = `
<span class="filter-option-value" data-id="${index}">${a} 
   <svg xmlns="https://www.w3.org/2000/svg" style="
   pointer-events: none;
   margin-left: 8.5px;" data-id="${index} width="10px" height="10px" viewBox="0 0 7 7" id="filterOptionSvg" fill="none">
       <path data-id="${index} id="filterOptionPath" fill-rule="evenodd" clip-rule="evenodd" d="M4.00199 4.7091L6.64844 7.35554L7.35554 6.64844L4.7091 4.00199L7.35554 1.35554L6.64844 0.648438L4.00199 3.29488L1.35554 0.648438L0.648438 1.35554L3.29488 4.00199L0.648438 6.64844L1.35554 7.35554L4.00199 4.7091Z" fill="#C4C4C4"></path>
   </svg>
</span>
`;
        filter.appendChild(filterOption);
        index++;
    })
}

let filterOption = document.querySelector(".filter-option");

document.addEventListener(
    "click",
    function(e) {
        e = e || window.event;
        let target = e.srcElement;
        if (
            target.id === "filterOption" ||
            target.parentNode.id === "filterOption"
        ) {
            arrCounter = false;
            // console.log(filterOptionArray);
            let selectedId = parseInt(target.getAttribute('data-id'), 10);
            removeFilterElement(selectedId)
                // console.log(filterOptionArray);

        }
    },
    false
);



function removeFilterElement(value) {
    filterOptionArray.splice(value, 1);
    clickArr[value].checked = false;
    clickArr.splice(value, 1)
    updateFilterParam();
}


function countParam(array) {
    let color1 = 0;
    let color2 = 0;
    let color3 = 0;
    let color4 = 0;
    let color5 = 0;
    let color6 = 0;

    let vid1 = 0;
    let vid2 = 0;
    let vid3 = 0;
    let vid4 = 0;

    let razmer1 = 0;
    let razmer2 = 0;
    let razmer3 = 0;
    let razmer4 = 0;
    let razmer5 = 0;

    for (let index = 0; index < array.length; index++) {
        if (array[index].color == "redBtn") {
            color1++;
        } else if (array[index].color == "blueBtn") {
            color2++;
        } else if (array[index].color == "yellowBtn") {
            color3++;
        } else if (array[index].color == "greenBtn") {
            color4++;
        } else if (array[index].color == "grayBtn") {
            color5++;
        } else if (array[index].color == "blackBtn") {
            color6++;
        }



        if (array[index].vid == "vidBtn1") {
            vid1++;
        } else if (array[index].vid == "vidBtn2") {
            vid2++;
        } else if (array[index].vid == "vidBtn3") {
            vid3++;
        } else if (array[index].vid == "vidBtn4") {
            vid4++;
        }


        if (array[index].razmer == "razmerBtn1") {
            razmer1++;
        } else if (array[index].razmer == "razmerBtn2") {
            razmer2++;
        } else if (array[index].razmer == "razmerBtn3") {
            razmer3++;
        } else if (array[index].razmer == "razmerBtn4") {
            razmer4++;
        } else if (array[index].razmer == "razmerBtn5") {
            razmer5++;
        }





    }

    return [color1, color2, color3, color4, color5, color6, vid1, vid2, vid3, vid4, razmer1, razmer2, razmer3, razmer4, razmer5]

}

function showParamCounters(array) {
    for (let index = 0; index < array.length; index++) {
        document.getElementById(`${index+1}param`).innerHTML = array[index]
    }
}